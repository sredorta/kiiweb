<div class="preview">
    <div class="preview-button">
      <button  mat-flat-button type="button" color="primary" (click)="onSendEmailTest()"><i class="fas fa-paper-plane"></i>{{'kiilib.test' | translate}}</button>
    </div>
    <kii-email-preview [email]="previewEmail"></kii-email-preview>
</div> 
<kii-spinner-overlay [show]="isFormLoading">
  <form [formGroup]="myForm" (ngSubmit)="onSubmit(myForm.value)" novalidate> 
      <h2>{{'kiilib.email.config.logo' | translate}}</h2>
      <kii-image-upload size="100" [image]="email.logo" (onUpload)="onLogoUpload($event)"></kii-image-upload>
      <h2>{{'kiilib.email.config.colors' | translate}}</h2>
      <div class="colors-part">
          <mat-form-field>
              <input matInput formControlName="headerColor" [required]="true" type="color" [kiiInputDefaultValue]="email.headerColor">
              <mat-icon matPrefix class="icon"><i class="fas fa-palette"></i></mat-icon>
              <mat-hint>{{'kiilib.input.email.headercolor.hint' | translate}}</mat-hint>
          </mat-form-field>
          <mat-form-field>
              <input matInput formControlName="footerColor" [required]="true" type="color" [kiiInputDefaultValue]="email.footerColor">
              <mat-icon matPrefix class="icon"><i class="fas fa-palette"></i></mat-icon>
              <mat-hint>{{'kiilib.input.email.footercolor.hint' | translate}}</mat-hint>
          </mat-form-field>
          <mat-form-field>
              <input matInput formControlName="textColor" [required]="true" type="color" [kiiInputDefaultValue]="email.textColor">
              <mat-icon matPrefix class="icon"><i class="fas fa-palette"></i></mat-icon>
              <mat-hint>{{'kiilib.input.email.textcolor.hint' | translate}}</mat-hint>
          </mat-form-field>
          <mat-form-field>
              <input matInput formControlName="titleColor" [required]="true" type="color" [kiiInputDefaultValue]="email.titleColor">
              <mat-icon matPrefix class="icon"><i class="fas fa-palette"></i></mat-icon>
              <mat-hint>{{'kiilib.input.email.titlecolor.hint' | translate}}</mat-hint>
          </mat-form-field>
          <mat-form-field>
              <input matInput formControlName="subtitleColor" [required]="true" type="color" [kiiInputDefaultValue]="email.subtitleColor">
              <mat-icon matPrefix class="icon"><i class="fas fa-palette"></i></mat-icon>
              <mat-hint>{{'kiilib.input.email.subtitlecolor.hint' | translate}}</mat-hint>
          </mat-form-field>
      </div>   
      <mat-form-field [appearance]="kiiInputAppearance" style="width:100%">
          <mat-label>{{'kiilib.input.email.title.label' | translate}}</mat-label>
          <input matInput formControlName="title" placeholder="{{'kiilib.input.email.title.placeholder' | translate}}" required type="text" [kiiInputDefaultValue]="email.title">
          <mat-icon matPrefix class="icon"><i class="fas fa-heading"></i></mat-icon>
          <mat-hint>{{'kiilib.input.email.title.hint' | translate}}</mat-hint>
          <mat-error kiiInputError="title"></mat-error>            
      </mat-form-field>
      <mat-form-field [appearance]="kiiInputAppearance" style="width:100%">
          <mat-label>{{'kiilib.input.email.subtitle.label' | translate}}</mat-label>
          <input matInput formControlName="subtitle" placeholder="{{'kiilib.input.email.subtitle.placeholder' | translate}}" required type="text" [kiiInputDefaultValue]="email.subtitle">
          <mat-icon matPrefix class="icon"><i class="fas fa-paragraph"></i></mat-icon>
          <mat-hint>{{'kiilib.input.email.subtitle.hint' | translate}}</mat-hint>
          <mat-error kiiInputError="subtitle"></mat-error>            
      </mat-form-field>
      <h2>{{'kiilib.email.config.header' | translate}}</h2>
      <angular-editor id="editorHeader" formControlName="header" [ngClass]="{'is-initial' : isInitial}" [config]="editorConfig" [ngStyle]="{'color': previewEmail.textColor}" [kiiInputDefaultValue]="email.header"></angular-editor>
      <kii-image-upload size="600" [crop]="false" [image]="email.backgroundHeader" (onUpload)="onBackgroundHeader($event)"></kii-image-upload>
      <h2>{{'kiilib.email.config.content' | translate}}</h2>
      <angular-editor id="editorContent" formControlName="content" [ngClass]="{'is-initial' : isInitial}" [config]="editorConfig" [ngStyle]="{'color': previewEmail.textColor}" [kiiInputDefaultValue]="email.content"></angular-editor>
      <kii-image-upload size="600" [crop]="false" [image]="email.backgroundContent" (onUpload)="onBackgroundContent($event)"></kii-image-upload>

      <div class="control-wrapper">
          <button mat-button type="reset" color="primary"><span><i class="fas fa-undo"></i></span>{{'kiilib.cancel' | translate}}</button>
          <button mat-flat-button type="submit" color="primary"><i class="fas fa-plus"></i>{{'kiilib.add' | translate}}</button>
      </div>
  </form>
</kii-spinner-overlay>


